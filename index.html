<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Itssghir - Portfolio AI</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/sql-wasm.js"></script>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #4b0082, #8a2be2);
      font-family: 'Orbitron', sans-serif;
      color: #fff;
      overflow-x: hidden;
      position: relative;
    }

    header {
      text-align: center;
      padding: 60px 20px 30px;
    }

    header h1 {
      font-size: 3em;
      margin: 0;
      text-shadow: 0 0 10px #00ffcc;
    }

    header p {
      font-size: 1.2em;
      opacity: 0.8;
    }

    #rotating-text {
      font-size: 1.3em;
      font-style: italic;
      margin-top: 10px;
      animation: fade 3s infinite alternate;
    }

    @keyframes fade {
      0% { opacity: 0; }
      100% { opacity: 1; }
    }

    section {
      max-width: 900px;
      margin: auto;
      padding: 40px 20px;
      text-align: center;
    }

    .q-learning-grid {
      display: grid;
      grid-template-columns: repeat(5, 60px);
      grid-template-rows: repeat(5, 60px);
      gap: 4px;
      margin: 30px auto;
      justify-content: center;
    }

    .cell {
      width: 60px;
      height: 60px;
      background: #6a0dad;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid #ffffff66;
      transition: all 0.3s;
    }

    .optimal-path {
      background: rgba(0, 255, 204, 0.3) !important;
      animation: pathGlow 1.5s infinite alternate;
    }

    @keyframes pathGlow {
      0% { box-shadow: inset 0 0 5px #00ffcc; }
      100% { box-shadow: inset 0 0 15px #00ffcc; }
    }

    .agent {
      background: #00ffcc;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      box-shadow: 0 0 15px #00ffcc;
    }

    .goal {
      background: gold;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      box-shadow: 0 0 15px gold;
    }

    button {
      background: #9b59b6;
      border: none;
      padding: 12px 24px;
      color: white;
      font-size: 16px;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 20px;
      transition: all 0.3s;
    }

    button:hover {
      background: #be75e6;
      transform: scale(1.05);
    }

    #status {
      margin-top: 20px;
      font-size: 1.1em;
      font-style: italic;
      color: #ffd700;
      min-height: 60px;
    }

    textarea {
      width: 80%;
      height: 80px;
      padding: 10px;
      margin: 20px 0;
      border-radius: 5px;
      border: none;
      font-family: monospace;
      font-size: 14px;
      background: rgba(255,255,255,0.1);
      color: #fff;
    }

    #sql-output {
      background-color: rgba(255,255,255,0.1);
      padding: 20px;
      border-radius: 10px;
      text-align: left;
      margin-top: 10px;
      font-family: monospace;
      white-space: pre-wrap;
    }

    footer {
      background-color: #2c003e;
      color: #fff;
      text-align: center;
      padding: 20px 10px;
      margin-top: 50px;
      border-top: 1px solid #ffffff33;
    }

    #table-list {
      margin-bottom: 20px;
      padding: 15px;
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid #ffffff33;
      border-radius: 10px;
      font-family: monospace;
      font-size: 14px;
      color: #adf;
    }

    #storm-effect {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      background: repeating-linear-gradient(90deg, 
        rgba(255,255,255,0.05) 0, 
        rgba(255,255,255,0.05) 2px, 
        transparent 2px, 
        transparent 4px);
      animation: storm 0.5s linear infinite;
      z-index: 0;
    }

    @keyframes storm {
      from { background-position: 0 0; }
      to { background-position: 100% 100%; }
    }

    .interactive-card {
      background: rgba(255,255,255,0.1);
      border: 1px solid #ffffff44;
      border-radius: 12px;
      padding: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
      width: 250px;
      margin: auto;
      text-align: center;
    }

    .interactive-card:hover {
      background: rgba(255,255,255,0.2);
      transform: scale(1.05);
      box-shadow: 0 0 20px #9b59b6;
    }

    #qlearning-container {
      display: none;
      margin-top: 30px;
    }

    #path-display {
      margin: 20px 0;
      padding: 15px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 8px;
      font-family: monospace;
    }
  </style>
</head>
<body>
  <div id="storm-effect"></div>

  <header>
    <h1>Itssghir</h1>
    <p>Data Scientist • Python Enthusiast • Q-Learning Explorer</p>
    <div id="rotating-text"></div>
  </header>

  <section>
    <h2>📊 Console SQL Interactive</h2>
    <div id="table-list">Chargement des tables...</div>
    <textarea id="sql-input" placeholder="Ex: SELECT * FROM Competences;"></textarea><br>
    <button onclick="runSQL()">Exécuter</button>
    <div id="sql-output"></div>
  </section>

  <section>
    <h2>🧪 Test My Project :</h2>
    <div class="interactive-card" onclick="toggleQlearning()" 
         onmouseover="this.innerHTML='🧠 Try Me !'" 
         onmouseout="this.innerHTML='Q-Learning Demo'">
      Q-Learning Demo
    </div>
    <div id="qlearning-container">
      <p>Un agent doit apprendre à atteindre l'objectif (case dorée) sur une grille 5x5.</p>
      <div class="q-learning-grid" id="grid"></div>
      <button id="start-btn" onclick="startQLearning()">Démarrer l'apprentissage</button>
      <div id="status"></div>
    </div>
  </section>

  <footer>
    <p>📧 Contact : itssghir@example.com | 💼 LinkedIn : linkedin.com/in/itssghir</p>
    <p>&copy; 2025 Itssghir - Tous droits réservés</p>
  </footer>

  <script>
    let db;
    const tableList = document.getElementById("table-list");

    initSqlJs({ locateFile: file => `https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/${file}` })
      .then(SQL => {
        db = new SQL.Database();
        db.run(`CREATE TABLE Utilisateur (id INTEGER PRIMARY KEY, nom TEXT);
                INSERT INTO Utilisateur VALUES (1, 'Itssghir');
                CREATE TABLE Competences (id INTEGER PRIMARY KEY, nom TEXT);
                INSERT INTO Competences VALUES 
                  (1, 'Python'), (2, 'Machine Learning'),
                  (3, 'Deep Learning'), (4, 'Data Analysis');
                CREATE TABLE Experiences (
                  id INTEGER PRIMARY KEY,
                  poste TEXT,
                  entreprise TEXT,
                  duree TEXT
                );
                INSERT INTO Experiences VALUES
                  (1, 'Data Scientist', 'TechCorp', '2022-2024'),
                  (2, 'ML Engineer', 'AI StartUp', '2020-2022');`);

        const res = db.exec("SELECT name FROM sqlite_master WHERE type='table';");
        const tableNames = res[0].values.map(row => row[0]);
        tableList.textContent = "📂 Tables disponibles : " + tableNames.join(", ");
      });

    function runSQL() {
      const output = document.getElementById("sql-output");
      const input = document.getElementById("sql-input").value;
      try {
        const results = db.exec(input);
        output.textContent = results.length > 0 
          ? results.map(r => `${r.columns.join(" | ")}\n${r.values.map(v => v.join(" | ")).join("\n")}`).join("\n\n")
          : "✔️ Requête exécutée avec succès.";
      } catch (e) {
        output.textContent = "❌ Erreur : " + e.message;
      }
    }

    // SYSTÈME Q-LEARNING COMPLET
    const gridElement = document.getElementById("grid");
    let agentPos = 0;
    const goalPos = 24;
    let training = false;
    let episodes = 0;
    let steps = 0;
    let trainingInterval;
    let optimalPath = [];
    const qTable = Array.from({ length: 25 }, () => new Array(4).fill(0));
    const alpha = 0.3;
    const gamma = 0.9;
    let epsilon = 0.8;
    const epsilonDecay = 0.98;

    function drawGrid() {
      gridElement.innerHTML = "";
      for (let i = 0; i < 25; i++) {
        const cell = document.createElement("div");
        cell.className = "cell" + (optimalPath.includes(i) ? " optimal-path" : "");
        const maxQ = Math.max(...qTable[i]) || 0;
        cell.style.background = `linear-gradient(to top, 
          rgba(106,13,173,1) ${100 - maxQ * 2}%, 
          rgba(0,255,204,1) ${maxQ * 2}%)`;
        
        if (i === agentPos) cell.innerHTML = '<div class="agent"></div>';
        if (i === goalPos) cell.innerHTML = '<div class="goal"></div>';
        gridElement.appendChild(cell);
      }
    }

    function getValidActions(pos) {
      const actions = [];
      if (pos >= 5) actions.push(0); // Haut
      if (pos < 20) actions.push(1); // Bas
      if (pos % 5 !== 0) actions.push(2); // Gauche
      if (pos % 5 !== 4) actions.push(3); // Droite
      return actions;
    }

    function takeAction(pos, action) {
      const newPos = [
        pos - 5, // Haut
        pos + 5, // Bas
        pos - 1, // Gauche
        pos + 1  // Droite
      ][action];
      return (newPos >= 0 && newPos < 25) ? newPos : pos;
    }

    function calculateOptimalPath() {
      optimalPath = [];
      let currentPos = 0;
      const visited = new Set();
      
      while (currentPos !== goalPos && !visited.has(currentPos)) {
        optimalPath.push(currentPos);
        visited.add(currentPos);
        const actions = getValidActions(currentPos);
        if (actions.length === 0) break;
        const bestAction = actions.reduce((a, b) => 
          qTable[currentPos][a] > qTable[currentPos][b] ? a : b);
        currentPos = takeAction(currentPos, bestAction);
      }
      if (currentPos === goalPos) optimalPath.push(goalPos);
    }

    function startQLearning() {
      const status = document.getElementById("status");
      const startBtn = document.getElementById("start-btn");

      if (!training) {
        // Réinitialisation complète
        optimalPath = [];
        qTable.forEach((_, i) => qTable[i].fill(0));
        episodes = 0;
        steps = 0;
        agentPos = 0;
        epsilon = 0.8;
        training = true;
        startBtn.textContent = "Arrêter l'apprentissage";
        status.innerHTML = "";

        trainingInterval = setInterval(() => {
          let currentPos = agentPos;
          let episodeSteps = 0;
          let reachedGoal = false;
          
          while (episodeSteps < 20 && !reachedGoal) {
            const actions = getValidActions(currentPos);
            const action = Math.random() < epsilon 
              ? actions[Math.floor(Math.random() * actions.length)]
              : actions.reduce((a, b) => qTable[currentPos][a] > qTable[currentPos][b] ? a : b);
            
            const newPos = takeAction(currentPos, action);
            const reward = newPos === goalPos ? 100 : -0.1;
            const maxFutureQ = newPos === goalPos ? 0 : Math.max(...qTable[newPos]);
            
            qTable[currentPos][action] += alpha * (reward + gamma * maxFutureQ - qTable[currentPos][action]);
            
            currentPos = newPos;
            steps++;
            episodeSteps++;
            
            if (currentPos === goalPos) {
              episodes++;
              reachedGoal = true;
              epsilon *= epsilonDecay;
              currentPos = 0;
            }
          }

          agentPos = currentPos;
          drawGrid();
          
          status.innerHTML = `
            🏆 Épisodes réussis: <span style="color: #00ffcc">${episodes}</span><br>
            🚶 Pas total: <span style="color: #ffd700">${steps}</span><br>
            🔍 Exploration: <span style="color: #9b59b6">${(epsilon * 100).toFixed(1)}%</span>
          `;

          if (episodes >= 20) {
            clearInterval(trainingInterval);
            training = false;
            calculateOptimalPath();
            drawGrid();
            
            const pathDisplay = document.createElement("div");
            pathDisplay.id = "path-display";
            const pathSteps = optimalPath.map(pos => {
              const x = (pos % 5) + 1;
              const y = Math.floor(pos / 5) + 1;
              return `(${x},${y})`;
            }).join(" → ");
            
            pathDisplay.innerHTML = `
              <strong>🌟 Chemin Optimal 🌟</strong><br>
              ${pathSteps}<br>
              Longueur: ${optimalPath.length - 1} pas
            `;
            
            status.appendChild(pathDisplay);
            startBtn.textContent = "Recommencer";
          }
        }, 300);
      } else {
        clearInterval(trainingInterval);
        training = false;
        startBtn.textContent = "Démarrer l'apprentissage";
        status.textContent = "🛑 Apprentissage arrêté";
      }
    }

    drawGrid();

    // TEXTE ROTATIF
    const phrases = [
      "Data Science & Machine Learning",
      "Python | TensorFlow | PyTorch",
      "Apprentissage Automate Innovant",
      "Solutions IA sur Mesure"
    ];
    let index = 0;
    const rotatingText = document.getElementById("rotating-text");
    setInterval(() => {
      rotatingText.style.opacity = 0;
      setTimeout(() => {
        rotatingText.textContent = phrases[index];
        rotatingText.style.opacity = 1;
        index = (index + 1) % phrases.length;
      }, 500);
    }, 4000);

    function toggleQlearning() {
      const qSection = document.getElementById("qlearning-container");
      qSection.style.display = qSection.style.display === "none" ? "block" : "none";
      if (qSection.style.display === "block") drawGrid();
    }
  </script>
</body>
</html>
